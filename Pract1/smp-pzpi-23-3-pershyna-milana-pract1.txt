Харківський національний університет радіоелектроніки
Факультет комп’ютерних наук
Катедра програмної інженерії



ЗВІТ
з практичної роботи №1
з дисципліни «Скриптові мови програмування»





Виконала:
ст. гр. ПЗПІ-23-3 
Першина М. А. 

Перевірив:
Ст. викл. кафедри ПІ
Сокорчук І.П.




Харків, 2025 р. 



1 ІСТОРІЯ ЗМІН
№
	Дата
	Версія звіту
	Опис змін та виправлень
	1
	21.04.2025
	       0.1
	Додано другий розділ “Завдання”
	2
	24.04.2025
	28.  0.2
	Додано розділи “Опис виконаної роботи” та підрозділ “Хід роботи” та “Висновки”
	3
	02.05.2025
	Додано “Додаток А”, “Додаток В”
----------------------------------------------------------------



2 ЗАВДАННЯ
	1 Мета роботи:
Навчитися працювати зі скриптами командного інтерпретатора Bash, освоїти основи побудови умов, циклів, функцій та управління правами доступу до файлів. 

 	2 Завдання:
Метою завдання є створення Bash-скрипта, який відображає на екрані симетричну ялинку, що складається з: 
двох ярусів гілок у вигляді рівнобедрених трикутників; 
стовбура; 
шара снігу внизу. 
У скрипті обов’язково повинні бути реалізовані конструкції: 

if ... then ... fi 

while ... do ... done 

until ... do ... done 

for ... in .. do ... done 

for ((...)); do ... done 
обов’язковим є використання функції 
Параметри запуску скрипта: 
перший параметр — висота всієї ялинки (включно зі снігом); 
другий параметр — ширина шару снігу. 
Параметри повинні бути додатніми числами, інакше скрипт повинен повідомити про помилку через стандартний потік помилок та повернути код помилки. 
Також треба дотриматися таких умов щодо самого файлу скрипта: 
Файл скрипта повинен бути виконуваним для всіх користувачів системи. 
Право редагування повинен мати лише власник скрипта. 
----------------------------------------------------------------


3 ОПИС ВИКОНАНОЇ РОБОТИ 
3 Хід роботи 
Створимо файл скрипта з відпопідним до вимог іменем: 
touch $(whoami)-task1 

 
Зробимо файл виконуваним: 
chmod +x pzpi-23-3-pershyna-milana-task1 

 

Відкриємо файл для редагування: 
nano pzpi-23-3-pershyna-milana-task1 

 

Реалізуємо основний програмний скрипт (повний скрипт наведено у Додатку А): 

Перевірка наявності аргументів - якщо хоча б один параметр не передано, виводиться помилка та завершення скрипта з кодом 1. 

#!/bin/bash  
if [[ -z "$1" || -z "$2" ]]; then 
    echo "Помилка: Вкажіть два параметри - висоту ялинки та ширину снігу!" >&2 
    exit 1 
fi 

 
Перевірка, що аргументи — додатні цілі числа: регулярний вираз ^[0-9]+$ означає: один або більше символів від 0 до 9.  ! [[ ... ]] — інверсія умови: якщо аргумент не є числом, виконується помилка. 
if ! [[ "$1" =~ ^[0-9]+$ ]] || ! [[ "$2" =~ ^[0-9]+$ ]]; then 
    echo "Помилка: Аргументи повинні бути додатними цілими числами!" >&2 
    exit 1 
fi 

 
Мінімальні обмеження для побудови ялинки - перевірка, чи параметри достатні для побудови повноцінної ялинки (2 яруси, стовбур, сніг) 

if [[ $height -lt 4 || $snow_width -lt 5 ]]; then 
    echo "Помилка: Мінімальна висота - 4, мінімальна ширина снігу - 5!" >&2 
    exit 1 
fi 

 

 
У функції побудови ярусу символи * та # чергуються залежно від парності рядка: якщо рядок має непарний номер — виводиться *, якщо парний — #. Для організації побудови використовується цикл for ((...)). Щоб забезпечити центроване вирівнювання кожного рядка ярусу, використовується змінна padding, яка розраховується як кількість пробілів зліва до початку символів. Додатковий параметр skip_first дозволяє пропустити перший рядок при побудові другого ярусу, щоб уникнути дублювання верхнього рядка.  
draw_tier() { 
    local width=$1   # Ширина снігу 
    local height=$2  # Висота одного ярусу 
    local tier_width=$((width - 2)) # Ширина ярусу (на 2 менше, ніж сніг) 
    local skip_first=$3 # Пропустити перший ряд (для другого ярусу) 
    for ((i = 1; i <= height; i++)); do 
        if [[ $skip_first -eq 1 && $i -eq 1 ]]; then 
            continue  # Пропускаємо перший ряд для другого ярусу 
        fi 
        row_width=$((2 * i - 1)) # Кількість символів у рядку 
        # Визначаємо символ ('*' або '#') 
        if ((i % 2 == 1)); then 
            char="*" 
        else 
            char="#" 
        fi 
        local padding=$(((tier_width - row_width) / 2)) # Відступи для центрування 
        printf "%*s" "$padding" "" 
        printf "%s" "$(printf "%${row_width}s" | tr ' ' "$char")" 
        printf "\n" 
    done 
} 

 
Стовбур ялинки реалізується як два рядки із символами. Для цього використовується цикл for ((i = 0; i < 2; i++)), який повторює побудову рядка двічі. Центрування стовбура виконується так само, як і для ярусів гілок — за допомогою змінної padding, яка визначає кількість пробілів перед символами ###, щоб вони знаходилися посередині відносно загальної ширини снігового шару. 
draw_trunk() { 
    local width=$1 
    local trunk_width=3 
    local padding=$(((width - trunk_width) / 2)) 
    for ((i = 0; i < 2; i++)); do 
        printf "%*s###\n" "$padding" "" 
    done 
} 

Сніг на ялинці формується як один суцільний рядок із символів * шириною, заданою параметром snow_width. Для цього використовується конструкція printf "%s\n" "$(printf "%${width}s" | tr ' ' '*')" — спочатку створюється рядок з потрібною кількістю пробілів (%${width}s), після чого команда tr замінює кожен пробіл на зірочку *. 
draw_snow() { 
    local width=$1 
    printf "%s\n" "$(printf "%${width}s" | tr ' ' '*')" 
} 

 
Після отримання значень параметрів скрипт виконує їх коригування до потрібного формату. Висота ялинки округлюється до найближчого парного числа у меншу сторону (height=$((height / 2 * 2))), оскільки кожен ярус має однакову кількість рядків. Ширина снігового шару округлюється до найближчого непарного числа (snow_width=$((snow_width / 2 * 2 + 1))), щоб забезпечити симетричне центрування трикутників та стовбура.  
height=$((height / 2 * 2))        # Округлення до парного числа 
snow_width=$((snow_width / 2 * 2 + 1))  # Округлення до непарного числа 

 
Спочатку виводиться перший ярус повністю, далі — другий ярус. Потім додається стовбур, вирівняний по центру, і в самому кінці друкується сніг —ряд зірочок. 
draw_tier "$snow_width" "$tier_height" 0  # Перший ярус 
draw_tier "$snow_width" "$tier_height" 1  # Другий ярус без першої зірки 
draw_trunk "$snow_width"  # Стовбур 
draw_snow "$snow_width"   # Сніг 
exit 0 

Команда для виконання скрипта: 
~/pzpi-23-3-pershyna-milana-task1 11 16 
----------------------------------------------------------------
 

 
4 ВИСНОВКИ
 У результаті виконання завдання було отримано практичний досвід роботи зі скриптами Bash, а також закріплено знання щодо використання умовних конструкцій, циклів, функцій і роботи з параметрами скрипта. Начилися встановлювати права доступу до файлів. 



----------------------------------------------------------------



ДОДАТОК А
Відеозапис
Відеозапис презентації результатів лабораторної роботи: https://youtu.be/3QTtMU1_wnY
Хронологічний опис відеозапису:
00:00 - вступ
00:12 - запуск скрипту
00:18 - початок пояснення коду
00:28 - стартові перевірки вхідних значень
01:05 - присвоєння переданих значень до змінних
01:20 - пояснення функції малювання ярусу ялинки
03:36 - пояснення функції малювання стовбуру
04:08 - пояснення функції малювання снігу
04:39 - округлення та перевірка стратових (переданних) значень
05:27 - виклик всіх функцій



----------------------------------------------------------------



ДОДАТОК В
Повний код програми 
В.1
GitHub репозиторій: 
1 #!/bin/bash
2 # Перевіряємо, чи передано два аргументи
3 if [[ -z "$1" || -z "$2" ]]; then
4     echo "Помилка: Вкажіть два параметри - висоту ялинки та ширину снігу!" >&2
5     exit 1
6 fi
7 # Отримуємо числа з аргументів (тільки цілі позитивні значення)
8 if ! [[ "$1" =~ ^[0-9]+$ ]] || ! [[ "$2" =~ ^[0-9]+$ ]]; then
9     echo "Помилка: Аргументи повинні бути додатними цілими числами!" >&2
10     exit 1
11 fi
12 # Присвоюємо параметри змінним
13 height=$1
14 snow_width=$2
15 # Функція для друку одного ярусу ялинки
16 draw_tier() {
17     local width=$1   # Ширина снігу
18     local height=$2  # Висота одного ярусу
19     local tier_width=$((width - 2)) # Ширина ярусу (на 2 менше, ніж сніг)
20     local skip_first=$3 # Пропустити перший ряд (для другого ярусу)
21     for ((i = 1; i <= height; i++)); do
22         if [[ $skip_first -eq 1 && $i -eq 1 ]]; then
23             continue  # Пропускаємо перший ряд для другого ярусу
24         fi
25         row_width=$((2 * i - 1)) # Кількість символів у рядку
26         # Визначаємо символ ('*' або '#')
27         if ((i % 2 == 1)); then
28             char="*"
29         else
30             char="#"
31         fi
32         local padding=$(((tier_width - row_width) / 2)) # Відступи для центрування
33         printf "%*s" "$padding" ""
34         printf "%s" "$(printf "%${row_width}s" | tr ' ' "$char")"
35         printf "\n"
36     done
37 }
38 # Функція для друку стовбура
39 draw_trunk() {
40     local width=$1
41     local trunk_width=3
42     local padding=$(((width - trunk_width) / 2))
43     for ((i = 0; i < 2; i++)); do
44         printf "%*s###\n" "$padding" ""
45     done
46 }
47 # Функція для друку снігу
48 draw_snow() {
49     local width=$1
50     printf "%s\n" "$(printf "%${width}s" | tr ' ' '*')"
51 }
52 # Округлення до потрібних значень
53 height=$((height / 2 * 2))        # Округлення до парного числа
54 snow_width=$((snow_width / 2 * 2 + 1))  # Округлення до непарного числа
55 # Мінімальні допустимі значення
56 if [[ $height -lt 4 || $snow_width -lt 5 ]]; then
57     echo "Помилка: Мінімальна висота - 4, мінімальна ширина снігу - 5!" >&2
58     exit 1
59 fi
60 tier_height=$((height / 2))  # Кількість рядків у кожному ярусі
61 # ===== Вивід ялинки =====
62 draw_tier "$snow_width" "$tier_height" 0  # Перший ярус
63 draw_tier "$snow_width" "$tier_height" 1  # Другий ярус без першої зірки
64 draw_trunk "$snow_width"  # Стовбур
65 draw_snow "$snow_width"   # Сніг
66 exit 0
